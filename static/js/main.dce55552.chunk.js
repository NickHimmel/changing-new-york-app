(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(64)},37:function(e,t,a){},41:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(24),i=a(4),c=a(2),s=a(26),l=Object(c.c)({photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FETCH_PHOTOS":return{isFetching:!0};case"COMPLETE_FETCH_PHOTOS":return{isFetching:!1,then_photo:t.data[0].then_photo,now_photo:t.data[1].now_photo,comparison:t.data[2].comparison,uuid:t.data[3].uuid};default:return e}}});a(37),a(39),a(41);var d=function(){return o.a.createElement("div",{className:"intro"},o.a.createElement("h1",{className:"title"},"Changing",o.a.createElement("br",null),"New York"),o.a.createElement("div",{className:"intro__inner"},o.a.createElement("p",{className:"header"},o.a.createElement("span",{className:"highlight"},"In 1935 the American photographer Berenice Abbott "),"proposed to the Federal Art Project a series that would document a growing New York City. In 1939 the results were printed in a book titled \u201cChanging New York.\u201d  Her work would end up documenting the waning of an industrial New York as rapid technological change was pushing the city into the future. In the public domain, Abbott\u2019s elegant, precise, and lively images have become a touchstone for photographers. Her historic record has created opportunity for a dialog about how New York has changed and where it is going."),o.a.createElement("p",{className:"header"},"Focusing on the Lower Manhattan waterfront and the Brooklyn Bridge Park area, this project uses the New York Public Library API to compare Abbott\u2019s photos to photos I have taken this year and last."),o.a.createElement("div",{className:"line"}),o.a.createElement("p",null,"New York City was born on the water. A verdant paradise with accessible waterfronts led to the first settlements in what is now Lower Manhattan. In the 19th century goods were moved by boat and New York\u2019s river access made the city rich. Industrial titans built a grand and gilded city. But the steep price for that wealth was poison, as industry polluted the rivers and the air."),o.a.createElement("p",null,"Throughout the 20th century New York moved away from heavy industry. The financial sector, Wall Street, excelled. Skyscrapers rose ever higher, office towers holding the new engines of the city. The waterfront was mostly abandoned. Robert Moses built his great highway system along the rivers and large scale housing complexes were erected for the poor."),o.a.createElement("p",null,"Now Wall Street is the financial capital of the world. New York is a luxury city. The rivers have been cleaned, the city and private developers are reclaiming the waterfront. The once hard-working piers are being replaced with active community spaces and Instagram-worthy destinations. High-end residential towers now sprout along the rivers. Ferries have returned to the waters. The rejuvenation has been a wild success, but the future looms ominously. Global warming is happening and the waters are rising. Soon the city\u2019s coastline will have to be fundamentally reimaged. As Berenice Abbott captured a rapidly disappearing piece of New York, I might have as well."),o.a.createElement("div",{className:"instructions"},o.a.createElement("span",{className:"pointer"},"\u261b"),o.a.createElement("p",null,"To view images and information about a location, click the dot on the map"))))},p=a(7),m=a(8),u=a(10),h=a(9),g=a(11),f=a(27),w=a(6),y=a.n(w),b=function(e,t){var a=e.data.nyplAPI.response.capture[0],n=t.data.nyplAPI.response.mods;return{then_photo:{uuid:a.uuid,title:a.title,note:E(n.note),photographer:"Berenice Abbott",date:k(n.originInfo.dateCreated.$),image:a.imageLinks.imageLink[3],item_link:a.itemLink,rights:"From The New York Public Library",rights_link:a.rightsStatementURI}}},v=function(e,t){return e.filter(function(e){return e.uuid===t})},E=function(e){var t=e.map(function(e){return e.$}).reduce(function(e,t){return e.length>t.length?e:t});return t||""},k=function(e){return e.slice(5,7)+"/"+e.slice(8,10)+"/"+e.slice(0,4)},N=function(e){return function(t,a){t({type:"START_FETCH_PHOTOS"}),Promise.all([y.a.get("/api/v1/items/".concat(e,"?withTitles=yes")),y.a.get("/api/v1/mods/".concat(e)),y.a.get("/photos.json"),y.a.get("/comparisons.json")]).then(function(a){var n=Object(f.a)(a,4),o=n[0],r=n[1],i=n[2],c=n[3],s=v(i.data,e)[0],l=v(c.data,e)[0];t({type:"COMPLETE_FETCH_PHOTOS",data:[b(o,r),{now_photo:s},{comparison:l},{uuid:e}]})}).catch(function(e){console.log(e.message)})}},P={geojson:{type:"FeatureCollection",features:[{type:"Feature",id:1,properties:{title:"Willow and Poplar Street,",UUID:"aee450e0-c60c-012f-2b4b-58d385a7bc34"},geometry:{type:"Point",coordinates:[-73.993948,40.701382]}},{type:"Feature",id:2,properties:{title:"Watuppa, Pier 5.",UUID:"c790af50-c60c-012f-2305-58d385a7bc34"},geometry:{coordinates:[-74.00181,40.694394],type:"Point"}},{type:"Feature",id:3,properties:{title:"Warehouse, Water and Dock Streets.",UUID:"a34e87b0-c60c-012f-6ea3-58d385a7bc34"},geometry:{coordinates:[-73.992202,40.703399],type:"Point"}},{type:"Feature",id:4,properties:{title:"Brooklyn Bridge, Water and Dock Streets.",UUID:"ac519960-c60c-012f-c327-58d385a7bc34"},geometry:{coordinates:[-73.992887,40.703441],type:"Point"}},{type:"Feature",id:5,properties:{title:"Columbia Heights no. 222.",UUID:"b2295550-c60c-012f-7451-58d385a7bc34"},geometry:{coordinates:[-73.997264,40.696398],type:"Point"}},{type:"Feature",id:6,properties:{title:"Brooklyn Bridge, Pier 21, Pennsylvania Railroad.",UUID:"e167b920-c60c-012f-9050-58d385a7bc34"},geometry:{coordinates:[-73.999997,40.707666],type:"Point"}},{type:"Feature",id:7,properties:{title:"Rope store, Peerless Equipment Co., 189 South Street.",UUID:"03e0c100-c60d-012f-6091-58d385a7bc34"},geometry:{coordinates:[-74.003616,40.705933],type:"Point"}},{type:"Feature",id:8,properties:{title:"Shelter on the water front, Coenties slip, Pier 5.",UUID:"0bc0ef10-c60d-012f-02a5-58d385a7bc34"},geometry:{coordinates:[-74.009465,40.701912],type:"Point"}},{type:"Feature",id:9,properties:{title:"Fulton Street Fish Market.",UUID:"b4602130-c60c-012f-3b0b-58d385a7bc34"},geometry:{coordinates:[-74.001952,40.706576],type:"Point"}},{type:"Feature",id:10,properties:{title:"Oyster Houses, South Street and Pike Slip.",UUID:"e3c8e2d0-c60c-012f-d813-58d385a7bc34"},geometry:{coordinates:[-73.991859,40.709832],type:"Point"}},{type:"Feature",id:11,properties:{title:"Downtown Skyport, Pier 11, East River.",UUID:"c637cf10-c60c-012f-480c-58d385a7bc34"},geometry:{coordinates:[-74.006397,40.703425],type:"Point"}},{type:"Feature",id:12,properties:{title:"Manhattan Skyline: I. South Street and Jones Lane.",UUID:"9c9a3720-c60c-012f-bd88-58d385a7bc34"},geometry:{coordinates:[-74.005811,40.702776],type:"Point"}},{type:"Feature",id:13,properties:{title:"Firehouse, Battery.",UUID:"ae6c9620-c60c-012f-8c20-58d385a7bc34"},geometry:{coordinates:[-74.017451,40.703832],type:"Point"}},{type:"Feature",id:14,properties:{title:"Pier 13, North River.",UUID:"aa10d490-c60c-012f-103f-58d385a7bc34"},geometry:{coordinates:[-74.014237,40.711654],type:"Point"}},{type:"Feature",id:15,properties:{title:"Ferry, West Street, foot of Liberty Street.",UUID:"c4e84d40-c60c-012f-83bb-58d385a7bc34"},geometry:{coordinates:[-74.014425,40.711057],type:"Point"}}]}},I=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).setCoord=function(){var e=74.004,t=40.728,a=13.25;return window.innerWidth>761?(e=window.innerWidth/100*.001+74.011,t=40.738-window.innerWidth/100*.003):window.innerWidth>400?t=40.719-window.innerWidth/100*.004:window.innerWidth<400&&(a=12.75),[e,t,a]},a.handleClick=function(e){a.props.fetchPhotos(e)},a.state={id:10},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.mapboxgl;t.accessToken="pk.eyJ1Ijoibmlja2hpbW1lbCIsImEiOiJjajVvOHEwczIzbzFxMnFvNmgzYTlxcDNtIn0.so7Fl2IB0NepmcmrnpvC3Q";var a=new t.Popup({offset:[-5,-18]}),n=this.setCoord(),o=new t.Map({container:this.mapContainer,style:"mapbox://styles/nickhimmel/cjqrif8l61xis2qn4zemgwtx4",interactive:!1,center:[-n[0],n[1]],zoom:n[2]});P.geojson.features.forEach(function(n){var r=document.createElement("div");r.className="marker",n.id===e.state.id&&r.setAttribute("id","active"),r.addEventListener("mouseover",function(){a.setLngLat(n.geometry.coordinates).setHTML("<p>"+n.properties.title+"</p>").setLngLat(n.geometry.coordinates).addTo(o)}),r.addEventListener("mouseleave",function(){a.remove()}),r.addEventListener("click",function(){var t=document.getElementById("active");t&&t.removeAttribute("id"),r.setAttribute("id","active"),e.handleClick(n.properties.UUID)}),new t.Marker(r).setLngLat(n.geometry.coordinates).addTo(o)}),window.onresize=function(t){var a=e.setCoord();o.setCenter([-a[0],a[1]])}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"map"},o.a.createElement("div",{className:"map-credits"},o.a.createElement("a",{className:"link",href:"https://blog.mapbox.com/designing-north-star-c8574e299c94"},"Design North Star")))}}]),t}(n.Component),F=Object(i.b)(null,function(e){return Object(c.b)({fetchPhotos:N},e)})(I),_=function(e){return o.a.createElement("button",{className:"button",onClick:e.onClick},o.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M14 1.4L12.6 0 7 5.6 1.4 0 0 1.4 5.6 7 0 12.6 1.4 14 7 8.4l5.6 5.6 1.4-1.4L8.4 7z",fill:"#9B9B9B",fillRule:"evenodd"})))},C=function(){return o.a.createElement("div",{className:"loading"},o.a.createElement("h1",null,"Loading"),o.a.createElement("div",{className:"loader"}))},U=function(e){return o.a.createElement("div",{className:"photo"},o.a.createElement("a",{href:e.data.item_link,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{src:e.data.image,alt:e.data.title})))},O=function(e){var t;return o.a.createElement("div",{className:"caption"},o.a.createElement("h2",null,e.data.title," ",o.a.createElement("span",{className:"note"},e.data.note)),o.a.createElement("h3",null,e.data.photographer,", ",o.a.createElement("span",{className:"date"},(t=e.data.date,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})))),o.a.createElement("a",{className:"link-grey",href:e.data.rights_link,target:"_blank",rel:"noopener noreferrer"},e.data.rights))},j=function(e){return o.a.createElement("div",{className:"text"},o.a.createElement("h2",null,"Now and Then"),o.a.createElement("div",{className:"line"}),e.data.map(function(e,t){return o.a.createElement("p",{className:"",key:t},e)}))},L=function(e){return o.a.createElement("div",{className:"footnotes"},o.a.createElement("button",{id:"footnotes__button",onClick:function(e){var t=document.getElementById("footnotes-list"),a=document.getElementById("footnotes__button");t.classList.contains("visible")?(t.classList.remove("visible"),a.innerHTML="- Close Footnotes"):(t.classList.add("visible"),a.innerHTML="+ View Footnotes")}},"+ View Footnotes"),o.a.createElement("ul",{id:"footnotes-list",className:"visible"},e.data.map(function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("div",{className:"tooltip"},o.a.createElement("span",{className:"tooltip-text"},"\u201c",e.title,".\u201d ",e.site,"."),o.a.createElement("a",{className:"link",href:e.link,target:"_blank",rel:"noopener noreferrer"},t+1)),o.a.createElement("div",{className:"footnotes__mobile"},o.a.createElement("a",{className:"link-grey ",href:e.link,target:"_blank",rel:"noopener noreferrer"},"\u201c",e.title,".\u201d"),o.a.createElement("span",{className:"footnotes-site"},e.site,".")))})))},T=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).renderComparison=function(){return void 0===a.props.isFetching?null:a.props.isFetching?o.a.createElement(C,null):o.a.createElement("div",{id:"comparison-window",className:"comparison__inner"},o.a.createElement(_,{onClick:a.handleClick}),o.a.createElement(U,{data:a.props.then_photo}),o.a.createElement(O,{data:a.props.then_photo}),o.a.createElement(U,{data:a.props.now_photo}),o.a.createElement(O,{data:a.props.now_photo}),o.a.createElement(j,{data:a.props.comparison.text}),o.a.createElement(L,{data:a.props.comparison.footnotes}))},a.handleClick=function(){document.getElementById("comparison-window").classList.add("is-closed")},a.state={uuid:"e3c8e2d0-c60c-012f-d813-58d385a7bc34"},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.innerWidth>760&&this.props.fetchPhotos(this.state.uuid)}},{key:"render",value:function(){return o.a.createElement("div",{className:"comparison"},this.renderComparison())}}]),t}(n.Component),S=Object(i.b)(function(e){return{isFetching:e.photos.isFetching,then_photo:e.photos.then_photo,now_photo:e.photos.now_photo,comparison:e.photos.comparison,uuid:e.photos.uuid}},function(e){return Object(c.b)({fetchPhotos:N},e)})(T);a(61).config();var D=function(){return o.a.createElement("div",{className:"app"},o.a.createElement(d,null),o.a.createElement(F,null),o.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B,W=Object(c.d)(l,B,Object(c.a)(s.a));Object(r.render)(o.a.createElement(i.a,{store:W},o.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.dce55552.chunk.js.map